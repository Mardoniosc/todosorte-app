"use strict";(self.webpackChunkstandart=self.webpackChunkstandart||[]).push([[633],{9633:(X,f,a)=>{a.r(f),a.d(f,{PerfilPermissaoModule:()=>D});var m=a(4666),v=a(4466),b=a(9706),C=a(253),w=a(8951),e=a(2560),T=a(4880),u=a(4522),g=a(7822),d=a(6643),Z=a(6545),l=a.n(Z),h=a(4372),x=a(3574),_=a(2340),I=a(8987);let P=(()=>{class r{constructor(i){this.http=i,this.apiPath="/perfilpermissao"}getAll(){return this.http.get(`${_.N.api}${this.apiPath}`)}getById(i){return this.http.get(`${_.N.api}${this.apiPath}/${i.perfilId}/${i.permissaoId}`)}insert(i){return this.http.post(`${_.N.api}${this.apiPath}`,i)}update(i){return this.http.put(`${_.N.api}${this.apiPath}/${i.perfilId}/${i.permissaoId}`,i)}delete(i){return this.http.delete(`${_.N.api}${this.apiPath}/${i.perfilId}/${i.permissaoId}`)}}return r.\u0275fac=function(i){return new(i||r)(e.LFG(I.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var y=a(4714),p=a(3012);function k(r,n){if(1&r){const i=e.EpF();e.TgZ(0,"div",14)(1,"div",9),e.NdJ("click",function(){e.CHM(i);const o=e.MAs(5);return e.KtG(o.toggle())}),e.TgZ(2,"div",10),e._uU(3),e.qZA()(),e.TgZ(4,"mat-slide-toggle",11,15),e.NdJ("click",function(){e.CHM(i);const o=e.oxw().$implicit,s=e.oxw(3).$implicit,c=e.oxw();return e.KtG(c.atualizaPerfilPermissao(s,o))}),e.qZA()()}if(2&r){const i=e.oxw().$implicit,t=e.oxw(3).$implicit,o=e.oxw();e.xp6(3),e.hij(" ",i.descricao," "),e.xp6(1),e.Q6J("checked",o.permissaoAtivada(t,i))("color","primary")}}function $(r,n){if(1&r&&(e.ynx(0),e.YNc(1,k,6,3,"div",13),e.BQk()),2&r){const i=n.$implicit,t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",i.permissaoPai&&i.permissaoPai.descricao===t.descricao)}}function A(r,n){if(1&r){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",8)(2,"div",9),e.NdJ("click",function(){e.CHM(i);const o=e.MAs(6);return e.KtG(o.toggle())}),e.TgZ(3,"div",10),e._uU(4),e.qZA()(),e.TgZ(5,"mat-slide-toggle",11,12),e.NdJ("click",function(){e.CHM(i);const o=e.oxw().$implicit,s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.atualizaPerfilPermissao(s,o))}),e.qZA()(),e.YNc(7,$,2,1,"ng-container",1),e.BQk()}if(2&r){const i=e.oxw().$implicit,t=e.oxw().$implicit,o=e.oxw();e.xp6(4),e.hij(" ",i.descricao," "),e.xp6(1),e.Q6J("checked",o.permissaoAtivada(t,i))("color","primary"),e.xp6(2),e.Q6J("ngForOf",o.permissoes)}}function B(r,n){if(1&r&&(e.ynx(0),e.YNc(1,A,8,4,"ng-container",7),e.BQk()),2&r){const i=n.$implicit,t=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",!i.permissaoPai&&o.mostrarPermissao(t,i))}}function Q(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"mat-accordion",2)(2,"mat-expansion-panel",3)(3,"mat-expansion-panel-header",4)(4,"mat-panel-title",5),e._uU(5),e.qZA()(),e.TgZ(6,"div",6),e.YNc(7,B,2,1,"ng-container",1),e.qZA()()(),e.BQk()),2&r){const i=n.$implicit,t=e.oxw();e.xp6(3),e.Q6J("collapsedHeight","56px"),e.xp6(2),e.hij(" ",i.nome," "),e.xp6(2),e.Q6J("ngForOf",t.permissoes)}}let J=(()=>{class r{constructor(i,t,o){this.perfilService=i,this.permissaoService=t,this.perfilPermissaoService=o,this.perfils=[],this.permissoes=[],this.perfilPermissao=[],this.filtro={filtro:"",pagina:0,direcaoOrdenacao:"ASC",tamanho:100,ordenarPor:"id"}}ngOnInit(){this.carregaInformacoesPerfilPermissao()}carregaInformacoesPerfilPermissao(){this.perfilService.getAll(this.filtro).subscribe(i=>{this.perfils=i.content},i=>l().error("N\xe3o foi poss\xedvel carregar os perfils",i.error.error,{timeOut:1e4,progressBar:!0,closeButton:!0})),this.permissaoService.getAll(this.filtro).subscribe(i=>{this.permissoes=i.content},i=>l().error("N\xe3o foi poss\xedvel carregar os permiss\xf5es",i.error.error,{timeOut:1e4,progressBar:!0,closeButton:!0})),this.carregaDadosPerfilPermissao()}atualizaPerfilPermissao(i,t){let o={...this.perfilPermissao.find(s=>s.perfilId===i.id&&s.permissaoId===t.id)};o.status=!o.status,this.perfilPermissaoService.update(o).subscribe(()=>{const s=this.perfilPermissao.findIndex(c=>c.perfilId===i.id&&c.permissaoId===t.id);this.perfilPermissao[s].status=o.status,l().success("Permissao atualizada com sucesso!","",{timeOut:1e4,progressBar:!0,closeButton:!0})},s=>{l().error("N\xe3o foi poss\xedvel atualizar perfil e permissao selecionado",s.error.error,{timeOut:1e4,progressBar:!0,closeButton:!0})})}mostrarPermissao(i,t){return!!this.perfilPermissao.find(o=>o.perfilId===i.id&&o.permissaoId===t.id)}permissaoAtivada(i,t){if(this.perfilPermissao.length<1)return!1;const o=this.perfilPermissao.find(s=>s.perfilId===i.id&&s.permissaoId===t.id);return!!o&&o.status}carregaDadosPerfilPermissao(){this.perfilPermissaoService.getAll().subscribe(i=>{this.perfilPermissao=i},i=>l().error("N\xe3o foi poss\xedvel carregar perfils e permiss\xf5es",i.error.error,{timeOut:1e4,progressBar:!0,closeButton:!0}))}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(h.F),e.Y36(x.k),e.Y36(P))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-perfil-permissao-list"]],decls:2,vars:1,consts:[[1,"w-full","max-w-3xl"],[4,"ngFor","ngForOf"],[1,"max-w-4xl","mt-8"],[1,"bg-accent-200","dark:bg-accent-700","mt-2"],[3,"collapsedHeight"],[1,"font-medium","leading-tight"],[1,"grid","grid-cols-1","gap-2","w-full","mt-3"],[4,"ngIf"],[1,"flex","items-center","justify-between","mt-3","border-dashed","border-primary","hover:border-b-2"],[1,"flex-auto","cursor-pointer",3,"click"],[1,"leading-6","font-medium"],[1,"ml-2",3,"checked","color","click"],["communication",""],["class","flex items-center justify-between ml-6 border-dashed border-primary hover:border-b-2",4,"ngIf"],[1,"flex","items-center","justify-between","ml-6","border-dashed","border-primary","hover:border-b-2"],["securityToggle",""]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e.YNc(1,Q,8,3,"ng-container",1),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngForOf",t.perfils))},dependencies:[m.sg,m.O5,y.Rr,p.pp,p.ib,p.yz,p.yK]}),r})();function N(r,n){if(1&r){const i=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(i);const o=e.oxw(2).$implicit,s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.adicionarPermissao(s,o))}),e._UZ(1,"mat-icon",15),e.qZA()}2&r&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus-circle"))}function F(r,n){if(1&r){const i=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(i);const o=e.oxw(2).$implicit,s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.removerPermissao(s,o))}),e._UZ(1,"mat-icon",17),e.qZA()}2&r&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:trash"))}function O(r,n){if(1&r){const i=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(i);const o=e.oxw(2).$implicit,s=e.oxw(3).$implicit,c=e.oxw();return e.KtG(c.adicionarPermissao(s,o))}),e._UZ(1,"mat-icon",15),e.qZA()}2&r&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus-circle"))}function S(r,n){if(1&r){const i=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(i);const o=e.oxw(2).$implicit,s=e.oxw(3).$implicit,c=e.oxw();return e.KtG(c.removerPermissao(s,o))}),e._UZ(1,"mat-icon",17),e.qZA()}2&r&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:trash"))}function M(r,n){if(1&r&&(e.TgZ(0,"div",19)(1,"div",9)(2,"div",10),e._uU(3),e.qZA()(),e.TgZ(4,"div",11),e.YNc(5,O,2,1,"button",12),e.YNc(6,S,2,1,"button",13),e.qZA()()),2&r){const i=e.oxw().$implicit,t=e.oxw(3).$implicit,o=e.oxw();e.xp6(3),e.hij(" ",i.descricao," "),e.xp6(2),e.Q6J("ngIf",!o.temPermissao(t,i)),e.xp6(1),e.Q6J("ngIf",o.temPermissao(t,i))}}function Y(r,n){if(1&r&&(e.ynx(0),e.YNc(1,M,7,3,"div",18),e.BQk()),2&r){const i=n.$implicit,t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",i.permissaoPai&&i.permissaoPai.descricao===t.descricao)}}function j(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"div",8)(2,"div",9)(3,"div",10),e._uU(4),e.qZA()(),e.TgZ(5,"div",11),e.YNc(6,N,2,1,"button",12),e.YNc(7,F,2,1,"button",13),e.qZA()(),e.YNc(8,Y,2,1,"ng-container",1),e.BQk()),2&r){const i=e.oxw().$implicit,t=e.oxw().$implicit,o=e.oxw();e.xp6(4),e.hij(" ",i.descricao," "),e.xp6(2),e.Q6J("ngIf",!o.temPermissao(t,i)),e.xp6(1),e.Q6J("ngIf",o.temPermissao(t,i)),e.xp6(1),e.Q6J("ngForOf",o.permissoes)}}function U(r,n){if(1&r&&(e.ynx(0),e.YNc(1,j,9,4,"ng-container",7),e.BQk()),2&r){const i=n.$implicit;e.xp6(1),e.Q6J("ngIf",!i.permissaoPai)}}function V(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"mat-accordion",2)(2,"mat-expansion-panel",3)(3,"mat-expansion-panel-header",4)(4,"mat-panel-title",5),e._uU(5),e.qZA()(),e.TgZ(6,"div",6),e.YNc(7,U,2,1,"ng-container",1),e.qZA()()(),e.BQk()),2&r){const i=n.$implicit,t=e.oxw();e.xp6(3),e.Q6J("collapsedHeight","56px"),e.xp6(2),e.hij(" ",i.nome," "),e.xp6(2),e.Q6J("ngForOf",t.permissoes)}}let H=(()=>{class r{constructor(i,t,o){this.perfilService=i,this.permissaoService=t,this.perfilPermissaoService=o,this.perfils=[],this.permissoes=[],this.perfilPermissao=[],this.filtro={filtro:"",pagina:0,direcaoOrdenacao:"ASC",tamanho:100,ordenarPor:"id"}}ngOnInit(){this.carregaInformacoesPerfilPermissao()}carregaInformacoesPerfilPermissao(){this.perfilService.getAll(this.filtro).subscribe(i=>{this.perfils=i.content},i=>l().error("N\xe3o foi poss\xedvel carregar os perfils",i.error.error,{timeOut:1e4,progressBar:!0,closeButton:!0})),this.permissaoService.getAll(this.filtro).subscribe(i=>{this.permissoes=i.content},i=>l().error("N\xe3o foi poss\xedvel carregar os permiss\xf5es",i.error.error,{timeOut:1e4,progressBar:!0,closeButton:!0})),this.perfilPermissaoService.getAll().subscribe(i=>{this.perfilPermissao=i},i=>l().error("N\xe3o foi poss\xedvel carregar perfils e permiss\xf5es",i.error.error,{timeOut:1e4,progressBar:!0,closeButton:!0}))}temPermissao(i,t){return!!this.perfilPermissao.find(o=>o.perfilId===i.id&&o.permissaoId===t.id)}adicionarPermissao(i,t){this.perfilPermissaoService.insert({perfilId:i.id,permissaoId:t.id,status:!0}).subscribe(()=>{l().success(`Permiss\xe3o ${t.descricao} v\xednculada ao perfil ${i.nome} com sucesso!`,"",{timeOut:1e4,progressBar:!0,closeButton:!0}),this.perfilPermissao.push({perfilId:i.id,permissaoId:t.id,status:!0})},o=>l().error("Erro ao v\xedncular nova permiss\xe3o",o.error.error,{timeOut:1e4,progressBar:!0,closeButton:!0}))}removerPermissao(i,t){this.perfilPermissaoService.delete({perfilId:i.id,permissaoId:t.id,status:!0}).subscribe(()=>{l().success(`Permiss\xe3o ${t.descricao} removida do perfil ${i.nome} com sucesso!`,"",{timeOut:1e4,progressBar:!0,closeButton:!0});const o=this.perfilPermissao.findIndex(s=>s.perfilId===i.id&&s.permissaoId===t.id);this.perfilPermissao.splice(o,1)},o=>l().error("N\xe3o foi poss\xedvel remover v\xednculo",o.error.error,{timeOut:1e4,progressBar:!0,closeButton:!0}))}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(h.F),e.Y36(x.k),e.Y36(P))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-perfil-permissao-vinculacao"]],decls:2,vars:1,consts:[[1,"w-full","max-w-3xl"],[4,"ngFor","ngForOf"],[1,"max-w-4xl","mt-8","bg-accent-400"],[1,"bg-accent-200","dark:bg-accent-700","mt-2"],[3,"collapsedHeight"],[1,"font-medium","leading-tight"],[1,"grid","grid-cols-1","gap-2","w-full","mt-3"],[4,"ngIf"],[1,"flex","items-center","justify-between","mt-3","border-dashed","border-primary","hover:border-b-2"],[1,"flex-auto"],[1,"leading-6","font-medium"],[1,"order-1","sm:order-2","sm:ml-3","cursor-pointer"],["mat-icon-button","","class","hover:bg-green-100 hover:dark:bg-green",3,"click",4,"ngIf"],["mat-icon-button","","class","hover:bg-red-100 hover:dark:bg-red",3,"click",4,"ngIf"],["mat-icon-button","",1,"hover:bg-green-100","hover:dark:bg-green",3,"click"],[1,"text-hint","text-green-700","dark:text-on-green",3,"svgIcon"],["mat-icon-button","",1,"hover:bg-red-100","hover:dark:bg-red",3,"click"],[1,"text-hint","text-red-700","dark:text-on-red",3,"svgIcon"],["class","flex items-center justify-between ml-6 border-dashed border-primary hover:border-b-2",4,"ngIf"],[1,"flex","items-center","justify-between","ml-6","border-dashed","border-primary","hover:border-b-2"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e.YNc(1,V,8,3,"ng-container",1),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngForOf",t.perfils))},dependencies:[m.sg,m.O5,u.lW,g.Hw,p.pp,p.ib,p.yz,p.yK]}),r})();const L=["drawer"],G=function(r,n){return{"hover:bg-gray-100 dark:hover:bg-hover":r,"bg-primary-50 dark:bg-hover":n}},K=function(r,n){return{"text-hint":r,"text-primary dark:text-primary-500":n}},z=function(r){return{"text-primary dark:text-primary-500":r}};function E(r,n){if(1&r){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",19),e.NdJ("click",function(){const s=e.CHM(i).$implicit,c=e.oxw();return e.KtG(c.goToPanel(s.id))}),e._UZ(2,"mat-icon",20),e.TgZ(3,"div",21)(4,"div",22),e._uU(5),e.qZA(),e.TgZ(6,"div",23),e._uU(7),e.qZA()()(),e.BQk()}if(2&r){const i=n.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(6,G,!t.selectedPanel||t.selectedPanel!==i.id,t.selectedPanel&&t.selectedPanel===i.id)),e.xp6(1),e.Q6J("ngClass",e.WLB(9,K,!t.selectedPanel||t.selectedPanel!==i.id,t.selectedPanel&&t.selectedPanel===i.id))("svgIcon",i.icon),e.xp6(2),e.Q6J("ngClass",e.VKq(12,z,t.selectedPanel&&t.selectedPanel===i.id)),e.xp6(1),e.hij(" ",i.title," "),e.xp6(2),e.hij(" ",i.description," ")}}function q(r,n){1&r&&(e.ynx(0),e._UZ(1,"app-perfil-permissao-list"),e.BQk())}function R(r,n){1&r&&(e.ynx(0),e._UZ(1,"app-perfil-permissao-vinculacao"),e.BQk())}const W=[{path:"",component:(()=>{class r{constructor(i,t){this._changeDetectorRef=i,this._fuseMediaWatcherService=t,this.drawerMode="side",this.drawerOpened=!0,this.panels=[],this.selectedPanel="perfils",this._unsubscribeAll=new C.x}ngOnInit(){this.panels=[{id:"perfils",icon:"heroicons_outline:adjustments",title:"Lista de perfils com permiss\xf5es",description:"Detalhes de cada perfil com suas permiss\xf5es"},{id:"vinculacao",icon:"heroicons_outline:user-group",title:"V\xedncula\xe7\xe3o",description:"V\xedncular permiss\xf5es a perfils!"}],this._fuseMediaWatcherService.onMediaChange$.pipe((0,w.R)(this._unsubscribeAll)).subscribe(({matchingAliases:i})=>{i.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}goToPanel(i){this.selectedPanel=i,"over"===this.drawerMode&&this.drawer.close()}getPanelInfo(i){return this.panels.find(t=>t.id===i)}trackByFn(i,t){return t.id||i}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(e.sBO),e.Y36(T.T))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-configuracoes"]],viewQuery:function(i,t){if(1&i&&e.Gf(L,5),2&i){let o;e.iGM(o=e.CRH())&&(t.drawer=o.first)}},decls:23,vars:11,consts:[[1,"flex","flex-col","w-full","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"flex-auto","sm:h-full","dark:bg-accent-800"],[1,"sm:w-96","dark:bg-gray-900",3,"autoFocus","mode","opened"],["drawer",""],[1,"flex","items-center","justify-between","m-8","mr-6","sm:my-10"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],[1,"lg:hidden"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"flex","flex-col","divide-y","border-t","border-b"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-col"],[1,"flex-auto","px-6","pt-9","pb-12","md:p-8","md:pb-12","lg:p-12"],[1,"flex","items-center"],["mat-icon-button","",1,"lg:hidden","-ml-2",3,"click"],[1,"ml-2","lg:ml-0","text-3xl","font-bold","tracking-tight","leading-none"],[1,"mt-8"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"flex","px-8","py-5","cursor-pointer",3,"ngClass","click"],[3,"ngClass","svgIcon"],[1,"ml-3"],[1,"font-medium","leading-6",3,"ngClass"],[1,"mt-0.5","text-secondary"]],template:function(i,t){if(1&i){const o=e.EpF();e.TgZ(0,"div",0)(1,"mat-drawer-container",1)(2,"mat-drawer",2,3)(4,"div",4)(5,"div",5),e._uU(6," Configura\xe7\xf5es "),e.qZA(),e.TgZ(7,"div",6)(8,"button",7),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(3);return e.KtG(c.close())}),e._UZ(9,"mat-icon",8),e.qZA()()(),e.TgZ(10,"div",9),e.YNc(11,E,8,14,"ng-container",10),e.qZA()(),e.TgZ(12,"mat-drawer-content",11)(13,"div",12)(14,"div",13)(15,"button",14),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(3);return e.KtG(c.toggle())}),e._UZ(16,"mat-icon",8),e.qZA(),e.TgZ(17,"div",15),e._uU(18),e.qZA()(),e.TgZ(19,"div",16),e.ynx(20,17),e.YNc(21,q,2,0,"ng-container",18),e.YNc(22,R,2,0,"ng-container",18),e.BQk(),e.qZA()()()()()}2&i&&(e.xp6(2),e.Q6J("autoFocus",!1)("mode",t.drawerMode)("opened",t.drawerOpened),e.xp6(7),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(2),e.Q6J("ngForOf",t.panels)("ngForTrackBy",t.trackByFn),e.xp6(5),e.Q6J("svgIcon","heroicons_outline:menu"),e.xp6(2),e.hij(" ",t.getPanelInfo(t.selectedPanel).title," "),e.xp6(2),e.Q6J("ngSwitch",t.selectedPanel),e.xp6(1),e.Q6J("ngSwitchCase","perfils"),e.xp6(1),e.Q6J("ngSwitchCase","vinculacao"))},dependencies:[m.mk,m.sg,m.RF,m.n9,u.lW,g.Hw,d.jA,d.kh,d.LW,J,H]}),r})()}];let D=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[m.ez,b.Bz.forChild(W),v.m]}),r})()}}]);
//# sourceMappingURL=633.c3765aa0c249cf70.js.map