{"version":3,"file":"633.c3765aa0c249cf70.js","mappings":"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","names":["PerfilPermissaoService","constructor","http","this","getAll","get","env","apiPath","getById","perfilPermissao","perfilId","permissaoId","insert","post","update","put","delete","i0","factory","PerfilPermissaoListComponent","perfilService","permissaoService","perfilPermissaoService","filtro","pagina","direcaoOrdenacao","tamanho","ordenarPor","ngOnInit","carregaInformacoesPerfilPermissao","subscribe","perfils","content","error","toastr","timeOut","progressBar","closeButton","permissoes","carregaDadosPerfilPermissao","atualizaPerfilPermissao","perfil","permissao","perfilPermissaoRequest","find","pp","id","status","index","findIndex","mostrarPermissao","permissaoAtivada","length","perfilPermissoes","selectors","PerfilPermissaoVinculacaoComponent","temPermissao","adicionarPermissao","descricao","nome","push","removerPermissao","splice","routes","path","component","ConfiguracoesComponent","_changeDetectorRef","_fuseMediaWatcherService","Subject","panels","icon","title","description","onMediaChange$","pipe","takeUntil","_unsubscribeAll","matchingAliases","includes","drawerMode","drawerOpened","markForCheck","ngOnDestroy","next","complete","goToPanel","panel","selectedPanel","drawer","close","getPanelInfo","trackByFn","item","PerfilPermissaoModule","CommonModule","RouterModule","SharedModule"],"sourceRoot":"webpack:///","sources":["./src/app/modules/perfil-permissao/api/perfil-permissao.service.ts","./src/app/modules/perfil-permissao/containers/perfil-permissao-list/perfil-permissao-list.component.html","./src/app/modules/perfil-permissao/containers/perfil-permissao-list/perfil-permissao-list.component.ts","./src/app/modules/perfil-permissao/containers/perfil-permissao-vinculacao/perfil-permissao-vinculacao.component.html","./src/app/modules/perfil-permissao/containers/perfil-permissao-vinculacao/perfil-permissao-vinculacao.component.ts","./src/app/modules/perfil-permissao/containers/configuracoes/configuracoes.component.html","./src/app/modules/perfil-permissao/perfil-permissao.module.ts","./src/app/modules/perfil-permissao/containers/configuracoes/configuracoes.component.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { PerfilPermissao } from '../model/perfil-permissao.model';\nimport { environment as env } from 'environments/environment';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PerfilPermissaoService {\n  readonly apiPath = '/perfilpermissao';\n\n  constructor(private http: HttpClient) {}\n\n  getAll(): Observable<PerfilPermissao[]> {\n    return this.http.get<PerfilPermissao[]>(`${env.api}${this.apiPath}`);\n  }\n\n  getById(perfilPermissao: PerfilPermissao): Observable<PerfilPermissao> {\n    return this.http.get<PerfilPermissao>(\n      `${env.api}${this.apiPath}/${perfilPermissao.perfilId}/${perfilPermissao.permissaoId}`\n    );\n  }\n\n  insert(perfilPermissao: PerfilPermissao): Observable<null> {\n    return this.http.post<null>(`${env.api}${this.apiPath}`, perfilPermissao);\n  }\n\n  update(perfilPermissao: PerfilPermissao): Observable<null> {\n    return this.http.put<null>(\n      `${env.api}${this.apiPath}/${perfilPermissao.perfilId}/${perfilPermissao.permissaoId}`,\n      perfilPermissao\n    );\n  }\n\n  delete(perfilPermissao: PerfilPermissao): Observable<null> {\n    return this.http.delete<null>(\n      `${env.api}${this.apiPath}/${perfilPermissao.perfilId}/${perfilPermissao.permissaoId}`\n    );\n  }\n}\n","<div class=\"w-full max-w-3xl\">\n  <ng-container *ngFor=\"let perfil of perfils\">\n    <mat-accordion class=\"max-w-4xl mt-8\">\n      <mat-expansion-panel class=\"bg-accent-200 dark:bg-accent-700 mt-2\">\n        <mat-expansion-panel-header [collapsedHeight]=\"'56px'\">\n          <mat-panel-title class=\"font-medium leading-tight\">\n            {{ perfil.nome }}\n          </mat-panel-title>\n        </mat-expansion-panel-header>\n        <div class=\"grid grid-cols-1 gap-2 w-full mt-3\">\n          <!-- Permissão pai -->\n          <ng-container *ngFor=\"let permissao of permissoes\">\n            <ng-container *ngIf=\"\n                !permissao.permissaoPai && mostrarPermissao(perfil, permissao)\n              \">\n              <div class=\"flex items-center justify-between mt-3 border-dashed border-primary hover:border-b-2\">\n                <div class=\"flex-auto cursor-pointer\" (click)=\"communication.toggle()\">\n                  <div class=\"leading-6 font-medium\">\n                    {{ permissao.descricao }}\n                  </div>\n                </div>\n                <mat-slide-toggle (click)=\"atualizaPerfilPermissao(perfil, permissao)\"\n                  [checked]=\"permissaoAtivada(perfil, permissao)\" class=\"ml-2\" [color]=\"'primary'\" #communication>\n                </mat-slide-toggle>\n              </div>\n\n              <ng-container *ngFor=\"let permissao_filho of permissoes\">\n                <!-- Permissão Filha -->\n                <div class=\"flex items-center justify-between ml-6 border-dashed border-primary hover:border-b-2\" *ngIf=\"\n                    permissao_filho.permissaoPai &&\n                    permissao_filho.permissaoPai.descricao ===\n                      permissao.descricao\n                  \">\n                  <div class=\"flex-auto cursor-pointer\" (click)=\"securityToggle.toggle()\">\n                    <div class=\"leading-6 font-medium\">\n                      {{ permissao_filho.descricao }}\n                    </div>\n                  </div>\n                  <mat-slide-toggle (click)=\"atualizaPerfilPermissao(perfil, permissao_filho)\"\n                    [checked]=\"permissaoAtivada(perfil, permissao_filho)\" class=\"ml-2\" [color]=\"'primary'\"\n                    #securityToggle>\n                  </mat-slide-toggle>\n                </div>\n              </ng-container>\n            </ng-container>\n          </ng-container>\n        </div>\n      </mat-expansion-panel>\n    </mat-accordion>\n  </ng-container>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { PerfilService } from 'app/modules/perfil/api/perfil.service';\nimport { Perfil } from 'app/modules/perfil/models/perfil.model';\nimport { PermissaoService } from 'app/modules/permissao/api/permissao.service';\nimport { Permissao } from 'app/modules/permissao/permissao.mode';\nimport { IFilter } from 'app/shared/models/interface.model';\nimport { PerfilPermissaoService } from '../../api/perfil-permissao.service';\nimport { PerfilPermissao } from '../../model/perfil-permissao.model';\nimport toastr from 'toastr';\n\n@Component({\n  selector: 'app-perfil-permissao-list',\n  templateUrl: './perfil-permissao-list.component.html',\n  styleUrls: ['./perfil-permissao-list.component.scss'],\n})\nexport class PerfilPermissaoListComponent implements OnInit {\n  constructor(\n    private perfilService: PerfilService,\n    private permissaoService: PermissaoService,\n    private perfilPermissaoService: PerfilPermissaoService\n  ) {}\n\n  perfils: Perfil[] = [];\n  permissoes: Permissao[] = [];\n  perfilPermissao: PerfilPermissao[] = [];\n\n  filtro: IFilter = {\n    filtro: '',\n    pagina: 0,\n    direcaoOrdenacao: 'ASC',\n    tamanho: 100,\n    ordenarPor: 'id',\n  };\n\n  ngOnInit(): void {\n    this.carregaInformacoesPerfilPermissao();\n  }\n\n  carregaInformacoesPerfilPermissao(): void {\n    this.perfilService.getAll(this.filtro).subscribe(\n      (perfils) => {\n        this.perfils = perfils.content;\n      },\n      (error) =>\n        toastr.error(\n          'Não foi possível carregar os perfils',\n          error.error.error,\n          {\n            timeOut: 10000,\n            progressBar: true,\n            closeButton: true,\n          }\n        )\n    );\n\n    this.permissaoService.getAll(this.filtro).subscribe(\n      (permissoes) => {\n        this.permissoes = permissoes.content;\n      },\n      (error) =>\n        toastr.error(\n          'Não foi possível carregar os permissões',\n          error.error.error,\n          {\n            timeOut: 10000,\n            progressBar: true,\n            closeButton: true,\n          }\n        )\n    );\n\n    this.carregaDadosPerfilPermissao();\n  }\n\n  atualizaPerfilPermissao(perfil: Perfil, permissao: Permissao): void {\n    let perfilPermissaoRequest: PerfilPermissao = {\n      ...this.perfilPermissao.find(\n        (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\n      ),\n    };\n    perfilPermissaoRequest.status = !perfilPermissaoRequest.status;\n    this.perfilPermissaoService.update(perfilPermissaoRequest).subscribe(\n      () => {\n        const index = this.perfilPermissao.findIndex(\n          (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\n        );\n        this.perfilPermissao[index].status = perfilPermissaoRequest.status;\n        toastr.success('Permissao atualizada com sucesso!', '', {\n          timeOut: 10000,\n          progressBar: true,\n          closeButton: true,\n        });\n      },\n      (error) => {\n        toastr.error(\n          'Não foi possível atualizar perfil e permissao selecionado',\n          error.error.error,\n          {\n            timeOut: 10000,\n            progressBar: true,\n            closeButton: true,\n          }\n        );\n      }\n    );\n  }\n\n  mostrarPermissao(perfil: Perfil, permissao: Permissao): boolean {\n    return !!this.perfilPermissao.find(\n      (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\n    );\n  }\n\n  permissaoAtivada(perfil: Perfil, permissao: Permissao): boolean {\n    if (this.perfilPermissao.length < 1) return false;\n    const perfilPermissao = this.perfilPermissao.find(\n      (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\n    );\n\n    if (!perfilPermissao) return false;\n\n    return perfilPermissao.status;\n  }\n\n  private carregaDadosPerfilPermissao(): void {\n    this.perfilPermissaoService.getAll().subscribe(\n      (perfilPermissoes) => {\n        this.perfilPermissao = perfilPermissoes;\n      },\n      (error) =>\n        toastr.error(\n          'Não foi possível carregar perfils e permissões',\n          error.error.error,\n          {\n            timeOut: 10000,\n            progressBar: true,\n            closeButton: true,\n          }\n        )\n    );\n  }\n}\n","<div class=\"w-full max-w-3xl\">\n  <ng-container *ngFor=\"let perfil of perfils\">\n    <mat-accordion class=\"max-w-4xl mt-8 bg-accent-400\">\n      <mat-expansion-panel class=\"bg-accent-200 dark:bg-accent-700 mt-2\">\n        <mat-expansion-panel-header [collapsedHeight]=\"'56px'\">\n          <mat-panel-title class=\"font-medium leading-tight\">\n            {{ perfil.nome }}\n          </mat-panel-title>\n        </mat-expansion-panel-header>\n        <div class=\"grid grid-cols-1 gap-2 w-full mt-3\">\n          <!-- Permissão pai -->\n          <ng-container *ngFor=\"let permissao of permissoes\">\n            <ng-container *ngIf=\"!permissao.permissaoPai\">\n              <div class=\"flex items-center justify-between mt-3 border-dashed border-primary hover:border-b-2\">\n                <div class=\"flex-auto\">\n                  <div class=\"leading-6 font-medium\">\n                    {{ permissao.descricao }}\n                  </div>\n                </div>\n                <div class=\"order-1 sm:order-2 sm:ml-3 cursor-pointer\">\n                  <button *ngIf=\"!temPermissao(perfil, permissao)\" mat-icon-button\n                    class=\"hover:bg-green-100 hover:dark:bg-green\" (click)=\"adicionarPermissao(perfil, permissao)\">\n                    <mat-icon class=\"text-hint text-green-700 dark:text-on-green\"\n                      [svgIcon]=\"'heroicons_outline:plus-circle'\"></mat-icon>\n                  </button>\n                  <button *ngIf=\"temPermissao(perfil, permissao)\" mat-icon-button\n                    class=\"hover:bg-red-100 hover:dark:bg-red\" (click)=\"removerPermissao(perfil, permissao)\">\n                    <mat-icon class=\"text-hint text-red-700 dark:text-on-red\" [svgIcon]=\"'heroicons_outline:trash'\">\n                    </mat-icon>\n                  </button>\n                </div>\n              </div>\n\n              <ng-container *ngFor=\"let permissao_filho of permissoes\">\n                <!-- Permissão Filha -->\n                <div class=\"flex items-center justify-between ml-6 border-dashed border-primary hover:border-b-2\" *ngIf=\"\n                    permissao_filho.permissaoPai &&\n                    permissao_filho.permissaoPai.descricao ===\n                      permissao.descricao\n                  \">\n                  <div class=\"flex-auto\">\n                    <div class=\"leading-6 font-medium\">\n                      {{ permissao_filho.descricao }}\n                    </div>\n                  </div>\n                  <div class=\"order-1 sm:order-2 sm:ml-3 cursor-pointer\">\n                    <button *ngIf=\"!temPermissao(perfil, permissao_filho)\" mat-icon-button\n                      class=\"hover:bg-green-100 hover:dark:bg-green\"\n                      (click)=\"adicionarPermissao(perfil, permissao_filho)\">\n                      <mat-icon class=\"text-hint text-green-700 dark:text-on-green\"\n                        [svgIcon]=\"'heroicons_outline:plus-circle'\"></mat-icon>\n                    </button>\n                    <button *ngIf=\"temPermissao(perfil, permissao_filho)\" mat-icon-button\n                      class=\"hover:bg-red-100 hover:dark:bg-red\" (click)=\"removerPermissao(perfil, permissao_filho)\">\n                      <mat-icon class=\"text-hint text-red-700 dark:text-on-red\" [svgIcon]=\"'heroicons_outline:trash'\">\n                      </mat-icon>\n                    </button>\n                  </div>\n                </div>\n              </ng-container>\n            </ng-container>\n          </ng-container>\n        </div>\n      </mat-expansion-panel>\n    </mat-accordion>\n  </ng-container>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { PerfilService } from 'app/modules/perfil/api/perfil.service';\nimport { Perfil } from 'app/modules/perfil/models/perfil.model';\nimport { PermissaoService } from 'app/modules/permissao/api/permissao.service';\nimport { Permissao } from 'app/modules/permissao/permissao.mode';\nimport { IFilter } from 'app/shared/models/interface.model';\nimport { PerfilPermissaoService } from '../../api/perfil-permissao.service';\nimport { PerfilPermissao } from '../../model/perfil-permissao.model';\nimport toastr from 'toastr';\n\n@Component({\n  selector: 'app-perfil-permissao-vinculacao',\n  templateUrl: './perfil-permissao-vinculacao.component.html',\n  styleUrls: ['./perfil-permissao-vinculacao.component.scss'],\n})\nexport class PerfilPermissaoVinculacaoComponent implements OnInit {\n  perfils: Perfil[] = [];\n  permissoes: Permissao[] = [];\n  perfilPermissao: PerfilPermissao[] = [];\n\n  filtro: IFilter = {\n    filtro: '',\n    pagina: 0,\n    direcaoOrdenacao: 'ASC',\n    tamanho: 100,\n    ordenarPor: 'id',\n  };\n\n  constructor(\n    private perfilService: PerfilService,\n    private permissaoService: PermissaoService,\n    private perfilPermissaoService: PerfilPermissaoService\n  ) {}\n\n  ngOnInit(): void {\n    this.carregaInformacoesPerfilPermissao();\n  }\n\n  carregaInformacoesPerfilPermissao(): void {\n    this.perfilService.getAll(this.filtro).subscribe(\n      (perfils) => {\n        this.perfils = perfils.content;\n      },\n      (error) =>\n        toastr.error(\n          'Não foi possível carregar os perfils',\n          error.error.error,\n          {\n            timeOut: 10000,\n            progressBar: true,\n            closeButton: true,\n          }\n        )\n    );\n\n    this.permissaoService.getAll(this.filtro).subscribe(\n      (permissoes) => {\n        this.permissoes = permissoes.content;\n      },\n      (error) =>\n        toastr.error(\n          'Não foi possível carregar os permissões',\n          error.error.error,\n          {\n            timeOut: 10000,\n            progressBar: true,\n            closeButton: true,\n          }\n        )\n    );\n\n    this.perfilPermissaoService.getAll().subscribe(\n      (perfilPermissoes) => {\n        this.perfilPermissao = perfilPermissoes;\n      },\n      (error) =>\n        toastr.error(\n          'Não foi possível carregar perfils e permissões',\n          error.error.error,\n          {\n            timeOut: 10000,\n            progressBar: true,\n            closeButton: true,\n          }\n        )\n    );\n  }\n\n  temPermissao(perfil: Perfil, permissao: Permissao): boolean {\n    return !!this.perfilPermissao.find(\n      (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\n    );\n  }\n\n  adicionarPermissao(perfil: Perfil, permissao: Permissao): void {\n    this.perfilPermissaoService\n      .insert({\n        perfilId: perfil.id,\n        permissaoId: permissao.id,\n        status: true,\n      })\n      .subscribe(\n        () => {\n          toastr.success(\n            `Permissão ${permissao.descricao} vínculada ao perfil ${perfil.nome} com sucesso!`,\n            '',\n            {\n              timeOut: 10000,\n              progressBar: true,\n              closeButton: true,\n            }\n          );\n          this.perfilPermissao.push({\n            perfilId: perfil.id,\n            permissaoId: permissao.id,\n            status: true,\n          });\n        },\n        (error) =>\n          toastr.error('Erro ao víncular nova permissão', error.error.error, {\n            timeOut: 10000,\n            progressBar: true,\n            closeButton: true,\n          })\n      );\n  }\n\n  removerPermissao(perfil: Perfil, permissao: Permissao): void {\n    this.perfilPermissaoService\n      .delete({\n        perfilId: perfil.id,\n        permissaoId: permissao.id,\n        status: true,\n      })\n      .subscribe(\n        () => {\n          toastr.success(\n            `Permissão ${permissao.descricao} removida do perfil ${perfil.nome} com sucesso!`,\n            '',\n            {\n              timeOut: 10000,\n              progressBar: true,\n              closeButton: true,\n            }\n          );\n          const index = this.perfilPermissao.findIndex(\n            (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\n          );\n          this.perfilPermissao.splice(index, 1);\n        },\n        (error) =>\n          toastr.error('Não foi possível remover vínculo', error.error.error, {\n            timeOut: 10000,\n            progressBar: true,\n            closeButton: true,\n          })\n      );\n  }\n}\n","<div class=\"flex flex-col w-full min-w-0 sm:absolute sm:inset-0 sm:overflow-hidden\">\n  <mat-drawer-container class=\"flex-auto sm:h-full dark:bg-accent-800\">\n    <!-- Drawer -->\n    <mat-drawer class=\"sm:w-96 dark:bg-gray-900\" [autoFocus]=\"false\" [mode]=\"drawerMode\" [opened]=\"drawerOpened\"\n      #drawer>\n      <!-- Header -->\n      <div class=\"flex items-center justify-between m-8 mr-6 sm:my-10\">\n        <!-- Title -->\n        <div class=\"text-4xl font-extrabold tracking-tight leading-none\">\n          Configurações\n        </div>\n        <!-- Close button -->\n        <div class=\"lg:hidden\">\n          <button mat-icon-button (click)=\"drawer.close()\">\n            <mat-icon [svgIcon]=\"'heroicons_outline:x'\"></mat-icon>\n          </button>\n        </div>\n      </div>\n      <!-- Panel links -->\n      <div class=\"flex flex-col divide-y border-t border-b\">\n        <ng-container *ngFor=\"let panel of panels; trackBy: trackByFn\">\n          <div class=\"flex px-8 py-5 cursor-pointer\" [ngClass]=\"{\n              'hover:bg-gray-100 dark:hover:bg-hover':\n                !selectedPanel || selectedPanel !== panel.id,\n              'bg-primary-50 dark:bg-hover':\n                selectedPanel && selectedPanel === panel.id\n            }\" (click)=\"goToPanel(panel.id)\">\n            <mat-icon [ngClass]=\"{\n                'text-hint': !selectedPanel || selectedPanel !== panel.id,\n                'text-primary dark:text-primary-500':\n                  selectedPanel && selectedPanel === panel.id\n              }\" [svgIcon]=\"panel.icon\"></mat-icon>\n            <div class=\"ml-3\">\n              <div class=\"font-medium leading-6\" [ngClass]=\"{\n                  'text-primary dark:text-primary-500':\n                    selectedPanel && selectedPanel === panel.id\n                }\">\n                {{panel.title}}\n              </div>\n              <div class=\"mt-0.5 text-secondary\">\n                {{panel.description}}\n              </div>\n            </div>\n          </div>\n        </ng-container>\n      </div>\n    </mat-drawer>\n\n    <!-- Drawer content -->\n    <mat-drawer-content class=\"flex flex-col\">\n      <!-- Main -->\n      <div class=\"flex-auto px-6 pt-9 pb-12 md:p-8 md:pb-12 lg:p-12\">\n        <!-- Panel header -->\n        <div class=\"flex items-center\">\n          <!-- Drawer toggle -->\n          <button class=\"lg:hidden -ml-2\" mat-icon-button (click)=\"drawer.toggle()\">\n            <mat-icon [svgIcon]=\"'heroicons_outline:menu'\"></mat-icon>\n          </button>\n\n          <!-- Panel title -->\n          <div class=\"ml-2 lg:ml-0 text-3xl font-bold tracking-tight leading-none\">\n            {{getPanelInfo(selectedPanel).title}}\n          </div>\n        </div>\n\n        <!-- Load settings panel -->\n        <div class=\"mt-8\">\n          <ng-container [ngSwitch]=\"selectedPanel\">\n            <!-- Account -->\n            <ng-container *ngSwitchCase=\"'perfils'\">\n              <app-perfil-permissao-list></app-perfil-permissao-list>\n            </ng-container>\n            <!-- Security -->\n            <ng-container *ngSwitchCase=\"'vinculacao'\">\n              <app-perfil-permissao-vinculacao></app-perfil-permissao-vinculacao>\n            </ng-container>\n          </ng-container>\n        </div>\n      </div>\n    </mat-drawer-content>\n  </mat-drawer-container>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PerfilPermissaoListComponent } from './containers/perfil-permissao-list/perfil-permissao-list.component';\nimport { SharedModule } from 'app/shared/shared.module';\nimport { Route, RouterModule } from '@angular/router';\nimport { ConfiguracoesComponent } from './containers/configuracoes/configuracoes.component';\nimport { PerfilPermissaoVinculacaoComponent } from './containers/perfil-permissao-vinculacao/perfil-permissao-vinculacao.component';\n\nconst routes: Route[] = [{ path: '', component: ConfiguracoesComponent }];\n\n@NgModule({\n  declarations: [\n    PerfilPermissaoListComponent,\n    ConfiguracoesComponent,\n    PerfilPermissaoVinculacaoComponent,\n  ],\n  imports: [CommonModule, RouterModule.forChild(routes), SharedModule],\n})\nexport class PerfilPermissaoModule {}\n","import {\n  ChangeDetectorRef,\n  Component,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { MatDrawer } from '@angular/material/sidenav';\nimport { Subject, takeUntil } from 'rxjs';\nimport { FuseMediaWatcherService } from '@fuse/services/media-watcher';\n\n@Component({\n  selector: 'app-configuracoes',\n  templateUrl: './configuracoes.component.html',\n  styleUrls: ['./configuracoes.component.scss'],\n})\nexport class ConfiguracoesComponent implements OnInit, OnDestroy {\n  @ViewChild('drawer') drawer: MatDrawer;\n  drawerMode: 'over' | 'side' = 'side';\n  drawerOpened: boolean = true;\n  panels: any[] = [];\n  selectedPanel: string = 'perfils';\n  private _unsubscribeAll: Subject<any> = new Subject<any>();\n\n  constructor(\n    private _changeDetectorRef: ChangeDetectorRef,\n    private _fuseMediaWatcherService: FuseMediaWatcherService\n  ) {}\n\n  ngOnInit(): void {\n    this.panels = [\n      {\n        id: 'perfils',\n        icon: 'heroicons_outline:adjustments',\n        title: 'Lista de perfils com permissões',\n        description: 'Detalhes de cada perfil com suas permissões',\n      },\n      {\n        id: 'vinculacao',\n        icon: 'heroicons_outline:user-group',\n        title: 'Vínculação',\n        description: 'Víncular permissões a perfils!',\n      },\n    ];\n\n    this._fuseMediaWatcherService.onMediaChange$\n      .pipe(takeUntil(this._unsubscribeAll))\n      .subscribe(({ matchingAliases }) => {\n        if (matchingAliases.includes('lg')) {\n          this.drawerMode = 'side';\n          this.drawerOpened = true;\n        } else {\n          this.drawerMode = 'over';\n          this.drawerOpened = false;\n        }\n\n        this._changeDetectorRef.markForCheck();\n      });\n  }\n\n  ngOnDestroy(): void {\n    this._unsubscribeAll.next(null);\n    this._unsubscribeAll.complete();\n  }\n\n  goToPanel(panel: string): void {\n    this.selectedPanel = panel;\n\n    if (this.drawerMode === 'over') {\n      this.drawer.close();\n    }\n  }\n\n  getPanelInfo(id: string): any {\n    return this.panels.find((panel) => panel.id === id);\n  }\n\n  trackByFn(index: number, item: any): any {\n    return item.id || index;\n  }\n}\n"],"x_google_ignoreList":[]}