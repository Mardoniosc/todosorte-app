{"version":3,"file":"default-src_app_shared_containers_base-resource-form_index_ts-src_app_shared_containers_base--be4963.js","mappings":"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","sources":["./src/app/shared/containers/base-resource-form/BaseResourceFormComponent.ts","./src/app/shared/containers/base-resource-form/index.ts","./src/app/shared/containers/base-resource-list/base-resource-list.component.ts","./src/app/shared/models/base-resource.model.ts","./src/app/shared/models/eventos.enum.ts","./src/app/shared/services/base-resource.service.ts","./src/app/shared/services/rules.service.ts"],"sourcesContent":["import {\n  AfterContentChecked,\n  Component,\n  EventEmitter,\n  Inject,\n  Injector,\n  OnInit,\n} from '@angular/core';\nimport { FormBuilder, UntypedFormGroup } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport toastr from 'toastr';\n\nimport { BaseResourceModel } from 'app/shared/models/base-resource.model';\nimport { BaseResourceService } from 'app/shared/services/base-resource.service';\nimport { EEventosLocais } from 'app/shared/models/eventos.enum';\n\n@Component({\n  template: '',\n})\nexport abstract class BaseResourceFormComponent<T extends BaseResourceModel, R>\n  implements OnInit, AfterContentChecked\n{\n  currentAction: string;\n  resourceForm: UntypedFormGroup;\n  pageTitle: string;\n\n  protected route: ActivatedRoute;\n  protected router: Router;\n  protected formBuilder: FormBuilder;\n\n  carregamentoDeDados = new EventEmitter()\n\n  constructor(\n    protected injecto: Injector,\n    @Inject('resource') protected resource: T,\n    protected resourceService: BaseResourceService<T, R>\n  ) {\n    this.route = this.injecto.get(ActivatedRoute);\n    this.router = this.injecto.get(Router);\n    this.formBuilder = this.injecto.get(FormBuilder);\n  }\n\n  ngOnInit(): void {\n    this.setCurrentAction();\n    this.buildResourceForm();\n    this.loadResource();\n  }\n\n  ngAfterContentChecked(): void {\n    this.setPageTitle();\n  }\n\n  submitForm() {\n    if (this.resourceForm.invalid) {\n      return;\n    }\n\n    const resource: T = this.resourceForm.value;\n    if (this.currentAction === 'novo') {\n      this.resourceService.insert(resource).subscribe(\n        () => {\n          toastr.success('Dado cadastrado com sucesso!', 'Sucesso', {\n            timeOut: 10000,\n            progressBar: true,\n            closeButton: true,\n          });\n          const baseComponentPath: string =\n            this.route.snapshot.parent.url[0].path;\n\n          this.router.navigate([baseComponentPath]);\n        },\n        (error) => {\n          toastr.error(\n            'Não foi possível carregar os dados',\n            error.error.error,\n            {\n              timeOut: 10000,\n              progressBar: true,\n              closeButton: true,\n            }\n          );\n        }\n      );\n      return;\n    }\n\n    resource.id = this.resource.id;\n    this.resourceService.update(resource).subscribe(\n      () => {\n        toastr.success('Dado atualizado com sucesso!', 'Sucesso', {\n          timeOut: 10000,\n          progressBar: true,\n          closeButton: true,\n        });\n        const baseComponentPath: string =\n          this.route.snapshot.parent.url[0].path;\n\n        this.router.navigate([baseComponentPath]);\n      },\n      (error) => {\n        toastr.error('Não foi possível atualizar o dado', error.error.error, {\n          timeOut: 10000,\n          progressBar: true,\n          closeButton: true,\n        });\n      }\n    );\n  }\n\n  // PRIVATE METHODS\n  protected setCurrentAction() {\n    if (this.route.snapshot.url[this.route.snapshot.url.length - 1]?.path === 'novo') {\n      this.currentAction = 'novo';\n    } else {\n      this.currentAction = 'editar';\n    }\n  }\n\n  protected loadResource() {\n    if (this.currentAction === 'editar') {\n      const idResource = Number(\n        this.route.snapshot.url[this.route.snapshot.url.length - 2]?.path\n      );\n      this.resourceService.getById(idResource).subscribe(\n        (resource) => {\n          this.resource = resource;\n          this.resourceForm.patchValue(this.resource);\n          this.carregamentoDeDados.emit(EEventosLocais.CARREGAMENTO_DADOS_API)\n        },\n        (error) => {\n          toastr.error(\n            'Não foi possível carregar os dados',\n            error.error.error,\n            {\n              timeOut: 10000,\n              progressBar: true,\n              closeButton: true,\n            }\n          );\n        }\n      );\n    }\n  }\n\n  protected setPageTitle() {\n    if (this.currentAction === 'novo') {\n      this.pageTitle = this.createPageTitle();\n    } else {\n      this.pageTitle = this.editionPageTitle();\n    }\n  }\n\n  protected createPageTitle(): string {\n    return 'Novo';\n  }\n\n  protected editionPageTitle(): string {\n    return 'Edição';\n  }\n\n  protected abstract buildResourceForm(): void;\n}\n","export * from './BaseResourceFormComponent'\n","import { Component, Injector, OnInit } from '@angular/core';\nimport { MatPaginatorIntl, PageEvent } from '@angular/material/paginator';\nimport { FuseConfirmationService } from '@fuse/services/confirmation';\nimport { BaseResourceModel } from 'app/shared/models/base-resource.model';\nimport { IFilter } from 'app/shared/models/interface.model';\nimport { BaseResourceService } from 'app/shared/services/base-resource.service';\nimport { RulesService } from 'app/shared/services/rules.service';\nimport toastr from 'toastr';\n\n@Component({\n  template: '',\n})\nexport abstract class BaseResourceListComponent<T extends BaseResourceModel, R>\n  implements OnInit\n{\n  resources: T[] = [];\n\n  // MatPaginator Inputs\n  length = 0;\n  pageSize = 10;\n  pageSizeOptions: number[] = [5, 10, 25, 100];\n\n  // MatPaginator Output\n  pageEvent: PageEvent;\n  protected _fuseConfirmationService: FuseConfirmationService;\n  protected _matPaginatorIntl: MatPaginatorIntl;\n  protected _ruleService: RulesService;\n\n  constructor(\n    protected injecto: Injector,\n    protected resourceService: BaseResourceService<T, R>\n  ) {\n    this._fuseConfirmationService = this.injecto.get(FuseConfirmationService);\n    this._matPaginatorIntl = this.injecto.get(MatPaginatorIntl);\n    this._ruleService = this.injecto.get(RulesService);\n  }\n\n  ngOnInit(): void {\n    this.carregaInformacoesResource();\n    this._matPaginatorIntl.itemsPerPageLabel = 'Itens por página';\n  }\n\n  setPageSizeOptions(setPageSizeOptionsInput: string) {\n    if (setPageSizeOptionsInput) {\n      this.pageSizeOptions = setPageSizeOptionsInput\n        .split(',')\n        .map((str) => +str);\n    }\n  }\n\n  carregaInformacoesResource(): void {\n    const filtro: IFilter = {\n      filtro: '',\n      pagina: 0,\n      direcaoOrdenacao: 'DESC',\n      tamanho: 10,\n      ordenarPor: 'id',\n    };\n    this.resourceService.getAll(filtro).subscribe((data) => {\n      this.resources = data['content'];\n      this.length = data['totalElements'];\n      this.pageSize = data['size'];\n    });\n  }\n\n  excluir(resource: T): void {\n    const dialogRef = this._fuseConfirmationService.open({\n      title: `Deseja realmente excluir o item: ${resource.id}?`,\n      message: '',\n      icon: {\n        show: true,\n        name: 'heroicons_outline:exclamation',\n        color: 'warn',\n      },\n      actions: {\n        confirm: {\n          show: true,\n          label: 'Confirmar',\n          color: 'warn',\n        },\n        cancel: {\n          show: true,\n          label: 'Cancelar',\n        },\n      },\n      dismissible: false,\n    });\n\n    dialogRef.afterClosed().subscribe((result) => {\n      if (result === 'confirmed') {\n        this.resourceService.delete(resource.id).subscribe(\n          (res) => {\n            toastr.success(`Item excluído com sucesso!`, '', {\n              timeOut: 10000,\n              progressBar: true,\n              closeButton: true,\n            });\n            this.carregaInformacoesResource();\n          },\n          (error) => {\n            toastr.error(\n              'Não foi possível excluir o perfil',\n              error.error.error,\n              {\n                timeOut: 10000,\n                progressBar: true,\n                closeButton: true,\n              }\n            );\n          }\n        );\n      }\n    });\n  }\n\n  paginacao(event: Event): void {\n    this.pageSize = event['pageSize'];\n    const filtro: IFilter = {\n      filtro: '',\n      pagina: event['pageIndex'],\n      direcaoOrdenacao: 'DESC',\n      tamanho: this.pageSize,\n      ordenarPor: 'id',\n    };\n\n    this.resourceService.getAll(filtro).subscribe((data) => {\n      this.resources = data['content'];\n      this.length = data['totalElements'];\n      this.pageSize = data['size'];\n    });\n  }\n\n  filtrarResource(termo: string): void {\n    const filtro: IFilter = {\n      filtro: termo,\n      pagina: 0,\n      direcaoOrdenacao: 'DESC',\n      tamanho: 10,\n      ordenarPor: 'id',\n    };\n    this.resourceService.getAll(filtro).subscribe((data) => {\n      this.resources = data['content'];\n      this.length = data['totalElements'];\n      this.pageSize = data['size'];\n    });\n  }\n\n  validaPermissao(rule: string): boolean {\n    return this._ruleService.temPermissao(rule);\n  }\n}\n","export abstract class BaseResourceModel {\n  id?: number;\n}\n","export enum EEventosLocais {\n  CARREGAMENTO_DADOS_API = 'carregamento-dados-api',\n}\n","import { HttpClient, HttpParams } from '@angular/common/http';\nimport { Injectable, Injector } from '@angular/core';\nimport { environment as env } from 'environments/environment';\nimport { Observable } from 'rxjs';\nimport { BaseResourceModel } from '../models/base-resource.model';\nimport { IFilter } from '../models/interface.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport abstract class BaseResourceService<T extends BaseResourceModel, R> {\n  protected http: HttpClient;\n\n  constructor(protected apiPath: string, protected injector: Injector) {\n    this.http = injector.get(HttpClient);\n  }\n\n  getAll(filter: IFilter): Observable<R> {\n    const parametros = new HttpParams()\n      .set('filtro', filter.filtro)\n      .set('page', filter.pagina)\n      .set('linesPerPage', filter.tamanho)\n      .set('orderBy', filter.ordenarPor)\n      .set('direction', filter.direcaoOrdenacao);\n    return this.http.get<R>(`${env.apiAutenticacao}${this.apiPath}/page`, {\n      params: parametros,\n    });\n  }\n\n  getById(id: number): Observable<T> {\n    return this.http.get<T>(`${env.apiAutenticacao}${this.apiPath}/${id}`);\n  }\n\n  insert(resource: T): Observable<null> {\n    return this.http.post<null>(\n      `${env.apiAutenticacao}${this.apiPath}`,\n      resource\n    );\n  }\n\n  update(resource: T): Observable<null> {\n    return this.http.put<null>(\n      `${env.apiAutenticacao}${this.apiPath}/${resource.id}`,\n      resource\n    );\n  }\n\n  delete(id: number): Observable<null> {\n    return this.http.delete<null>(\n      `${env.apiAutenticacao}${this.apiPath}/${id}`\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AuthUtils } from 'app/core/auth/auth.utils';\nimport { ESessionStorage } from '../models/sessionstorage.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class RulesService {\n  constructor() {}\n\n  temPermissao(rule: string): boolean {\n    const token = sessionStorage.getItem(ESessionStorage.TOKEN);\n    if (!token) {\n      return false;\n    }\n\n    const { ROLES } = AuthUtils.decodeToken(token);\n\n    if (Object(ROLES).find((permissao) => permissao == rule)) {\n      return true;\n    }\n\n    return false;\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}